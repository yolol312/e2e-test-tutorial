# 1. 시나리오 분석 (우선순위 분류) — 10분 버전

이 실습은 “무엇을 E2E로 먼저 지킬지”를 **빠르게 합의**하는 시간입니다.  
다음 단계(Playwright 환경 설정/테스트 작성)에서 **오늘 만든 AC를 그대로 테스트 코드로 옮깁니다.**

---

## 준비물(도구)

- **Cursor(IDE)**: 레포 열기(참고 파일만 빠르게 확인)
  - `e2e/auth-and-purchase.spec.ts` (기본 플로우가 이미 있음)
  - `db.json` (상품/유저/재고 구조 확인)
- **화이트보드/포스트잇(택1)**: Notion 보드 / FigJam / Miro / 종이 포스트잇
- **문서(결과 저장)**: `docs/1_시나리오_분석.md`(이 파일)

---

## 10분 진행안(강사 스크립트 포함)

### 0:00–1:00 서비스의 “돈 되는 길” 확인

- 우리가 지킬 핵심 플로우는 일단 이것 하나로 시작합니다.
  - **로그인 → 상품 담기 → 구매(주문 완료)**
- 힌트: 이미 같은 흐름의 예시 테스트가 `e2e/auth-and-purchase.spec.ts`에 있어요(2단계에서 실제로 실행/확장).

### 1:00–2:00 핵심 비즈니스 가치 1문장

화이트보드에 한 문장만 적고, 이후 논의 기준으로 삼습니다.

- 템플릿: **“사용자가 (A)를 해서 (B)를 달성한다”**
- 예시: “사용자가 로그인하고 상품을 담아 **문제 없이 구매 완료**한다.”

### 2:00–5:00 사용자 시나리오 3~5개만 만들기(브레인스토밍)

규칙: “기능”이 아니라 “사용자 여정”으로 씁니다.

- 형식: **Who(누가) + What(무엇을) + Why(왜)**
- 예시 후보(이 앱 기준):
  - 로그인 성공 후 상품 목록으로 이동한다
  - 상품 1개를 장바구니에 담고 토스트를 본다
  - 장바구니에서 결제를 진행해 주문 완료 메시지를 본다
  - 결제 중 버튼이 비활성화되고 진행 상태가 보인다
  - (확장) 재고가 0이면 “품절”로 구매를 막는다

### 5:00–6:30 우선순위 1~2개 선정(점수 대신 ‘점 찍기’)

각자 스티커(또는 점) 2개를 “가장 비즈니스 임팩트 큰 시나리오”에 붙입니다.

- 원칙: **돈/신뢰가 깨지는 시나리오가 1순위**
- 보통 결과: **“구매 완료”**가 1등

### 6:30–7:30 E2E로 테스트할 범위(스코프) 한 줄로 합의

이 단계에서 딱 한 줄만 합의합니다.

- 예시 스코프 문장:
  - “이번 실습의 E2E는 **구매 완료 플로우**를 최우선으로 하고, UI 픽셀/디자인은 검증하지 않는다.”

### 7:30–10:00 인수 기준(AC) 1개만 작성하기(Top1 시나리오)

AC는 “테스트 코드”가 아니라 “기대 결과 합의”입니다. 관찰 가능한 것만 씁니다.

#### AC 템플릿(Given/When/Then)

- **Given**: (사전 조건)
- **When**: (사용자 행동)
- **Then**: (관찰 가능한 결과)

#### 예시 AC (Top1 권장: 로그인 → 담기 → 구매)

- **Given**: 데모 유저가 존재하고, 장바구니/주문이 비어있다
- **When**: 로그인 후 상품 1번을 장바구니에 담고 결제한다
- **Then**:
  - `/products`로 이동한다
  - “장바구니에 담았어요.”가 보인다
  - `/cart`에서 장바구니 항목이 1개 보인다
  - 결제 클릭 후 버튼이 비활성화되고 “결제 진행 중...”이 보인다
  - “주문이 완료되었어요. 감사합니다!”가 보인다

---

## 오늘 산출물(최소)

- **가치 1문장**
- **시나리오 3~5개 목록**
- **우선순위 Top1(필수), Top2(선택)**
- **Top1 시나리오의 AC**

> 다음 단계에서는 이 AC를 그대로 Playwright 테스트 코드로 옮겨서 자동화합니다.

---

## 핵심 비즈니스 가치(1문장)

- 사용자가 로그인해서 원하는 상품을 장바구니에 담고 **문제 없이 결제/주문 완료**까지 도달하게 한다.

## 시나리오 후보(학생들과 함께 3~5개 도출)

- **S1. 구매 완료(메인)**: 로그인 → 상품 1개 담기 → 장바구니 → 결제 → 주문 완료 메시지 확인
- **S2. 로그인 실패**: 잘못된 비밀번호로 로그인 → 에러 메시지 노출 → 상품 페이지로 이동하지 않음
- **S3. 장바구니 수량/삭제**: 장바구니에서 수량 변경 → 합계 반영 / 수량 0 → 항목 삭제
- **S4. 중복 결제 방지 UX**: 결제 클릭 → 버튼 disabled + “결제 진행 중...” → 완료 메시지
- **S5. (5단계 예고) 품절 상품**: 재고 0 상품은 “품절” 표시 및 장바구니/결제 불가

## 우선순위(Top1/Top2)

- **Top1: S1 구매 완료 플로우**
  - 이유: 전환/매출/신뢰에 직결되는 핵심 여정
- **Top2: S4 중복 결제 방지 UX**
  - 이유: 결제 중 상태/버튼 비활성화는 장애·CS로 이어지기 쉬워 회귀 방지 효과가 큼

## 최종 산출물(Top1 시나리오 AC)

### S1. 로그인 → 상품 담기 → 구매(주문 완료)

- **Given**
  - 데모 유저가 존재한다(예: `demo@breeze.com` / `demo1234`)
  - 해당 유저의 장바구니/주문 데이터가 비어있다(테스트 시작 전 정리)
- **When**
  - `/login`에서 로그인한다
  - 상품 목록에서 상품 1을 장바구니에 담는다
  - 장바구니로 이동해 결제를 진행한다
- **Then**
  - 로그인 후 URL이 `/products`를 포함한다
  - “장바구니에 담았어요.”가 보인다
  - `/cart`에서 장바구니 항목이 1개 보인다(`cart-item`)
  - 결제 클릭 후 결제 버튼이 비활성화되고 “결제 진행 중...”이 보인다(`checkout-button`)
  - “주문이 완료되었어요. 감사합니다!”가 보인다
